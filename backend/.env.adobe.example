# ============================================
# Adobe Podcast Enhanced Speech V2 Configuration
# ============================================
#
# Template for Adobe Enhancement Integration
# Copy this to .env and fill in your credentials
#
# SECURITY WARNING:
# - NEVER commit .env to version control
# - Use secrets management in production
# - Rotate credentials regularly
# ============================================

# ============================================
# Adobe Account Configuration
# ============================================

# Account 1 (Free Tier)
# Limits: 1 hour/day, 30 min/file, 500 MB
ADOBE_EMAIL_1=your_email@example.com
ADOBE_PASSWORD_1=your_secure_password
ADOBE_TIER_1=free

# Account 2 (Premium Tier) - OPTIONAL
# Limits: 4 hours/day, 2 hours/file, 1 GB
# Cost: $9.99/month
ADOBE_EMAIL_2=premium@example.com
ADOBE_PASSWORD_2=another_secure_password
ADOBE_TIER_2=premium

# Account 3 (Additional Free) - OPTIONAL
# Strategy: Pool multiple free accounts for higher quota
ADOBE_EMAIL_3=extra_free@example.com
ADOBE_PASSWORD_3=password123
ADOBE_TIER_3=free

# Add more accounts as needed (ADOBE_EMAIL_4, etc.)
# Each free account adds 1h/day quota
# Recommendation: 3-5 free accounts = 3-5h/day total

# ============================================
# Enhancement Settings
# ============================================

# Enable/Disable Enhancement
# Set to false to disable enhancement (passthrough mode)
ENHANCEMENT_ENABLED=true

# Default Quality Level
# Options: low, medium, high
# - low: Minimal enhancement, preserve natural sound
# - medium: Balanced clarity and naturalness (RECOMMENDED)
# - high: Maximum clarity, studio quality
ENHANCEMENT_DEFAULT_QUALITY=medium

# Enable Caching
# Highly recommended to avoid re-processing identical files
# Cache saves processing time and quota
ENHANCEMENT_CACHE_ENABLED=true

# Maximum Concurrent Processing
# Set to number of Adobe accounts for best performance
# Lower value = more conservative quota usage
ENHANCEMENT_MAX_CONCURRENT=2

# ============================================
# Playwright (Browser Automation) Settings
# ============================================

# Headless Mode
# true = No browser UI (production)
# false = Show browser window (debugging)
PLAYWRIGHT_HEADLESS=true

# Processing Timeout (milliseconds)
# Time to wait for enhancement to complete
# Default: 600000 (10 minutes)
PLAYWRIGHT_TIMEOUT=600000

# Page Load Timeout (milliseconds)
# Default: 60000 (1 minute)
PLAYWRIGHT_PAGE_LOAD_TIMEOUT=60000

# Upload Timeout (milliseconds)
# Default: 300000 (5 minutes)
PLAYWRIGHT_UPLOAD_TIMEOUT=300000

# Download Timeout (milliseconds)
# Default: 300000 (5 minutes)
PLAYWRIGHT_DOWNLOAD_TIMEOUT=300000

# ============================================
# Cache Configuration
# ============================================

# Cache Directory
# Where to store enhanced audio cache
CACHE_DIR=cache/adobe_enhance

# Cache Expiration (days)
# Auto-delete cache entries older than N days
# 0 = never expire
CACHE_EXPIRATION_DAYS=30

# Max Cache Size (MB)
# Maximum cache directory size
# 0 = unlimited
MAX_CACHE_SIZE_MB=5000

# ============================================
# Quality Analysis Settings
# ============================================

# Enable Quality Analysis
# Requires: librosa, soundfile, numpy, scipy
# Adds processing time but provides valuable metrics
ENABLE_QUALITY_ANALYSIS=false

# Generate Visualizations
# Create waveform/spectrum comparison images
# Requires: matplotlib
GENERATE_VISUALIZATIONS=false

# Analysis Output Directory
ANALYSIS_OUTPUT_DIR=reports/quality_analysis

# ============================================
# Retry & Error Handling
# ============================================

# Maximum Retries
# Number of retry attempts on failure
MAX_RETRIES=3

# Retry Delay (seconds)
# Wait time between retry attempts
RETRY_DELAY=5

# Rate Limit Retry Delay (seconds)
# Wait time when rate limited (1 hour recommended)
RATE_LIMIT_RETRY_DELAY=3600

# Fallback to Original on Error
# If true, returns original audio on enhancement failure
# If false, raises exception
FALLBACK_TO_ORIGINAL=true

# ============================================
# Circuit Breaker Configuration
# ============================================

# Failure Threshold
# Number of consecutive failures before opening circuit
CIRCUIT_BREAKER_THRESHOLD=5

# Reset Timeout (seconds)
# Time before attempting to close circuit after opening
CIRCUIT_BREAKER_TIMEOUT=300

# ============================================
# Monitoring & Logging
# ============================================

# Log Level
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log File
LOG_FILE=logs/adobe_enhance.log

# Enable Structured Logging
# JSON format for log aggregation
STRUCTURED_LOGGING=false

# Sentry DSN (Error Tracking)
# Optional: https://sentry.io
SENTRY_DSN=

# Sentry Environment
SENTRY_ENVIRONMENT=production

# Enable Metrics Collection
ENABLE_METRICS=true

# Metrics Export Format
# Options: prometheus, statsd, cloudwatch
METRICS_FORMAT=prometheus

# ============================================
# Performance Tuning
# ============================================

# Browser Pool Size
# Number of browser instances to maintain
# Higher = more parallel processing, more memory
BROWSER_POOL_SIZE=2

# Request Queue Size
# Maximum pending enhancement requests
MAX_QUEUE_SIZE=100

# Worker Threads
# For async processing
WORKER_THREADS=4

# Memory Limit (MB)
# Per enhancement process
MEMORY_LIMIT_MB=1024

# ============================================
# Storage Configuration
# ============================================

# Input Directory
INPUT_DIR=input

# Output Directory
OUTPUT_DIR=output

# Temporary Directory
TEMP_DIR=temp

# ============================================
# Security Settings
# ============================================

# Session Persistence
# Save browser sessions for faster re-login
SAVE_SESSIONS=true

# Session Encryption Key
# For encrypting stored credentials/cookies
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SESSION_ENCRYPTION_KEY=

# Credential Rotation Days
# Auto-rotate credentials after N days
CREDENTIAL_ROTATION_DAYS=90

# ============================================
# Development/Debug Settings
# ============================================

# Debug Mode
# Enable verbose logging and browser debugging
DEBUG=false

# Save Screenshots on Error
# Capture browser screenshots when enhancement fails
SAVE_SCREENSHOTS_ON_ERROR=true

# Screenshot Directory
SCREENSHOT_DIR=debug/screenshots

# Keep Failed Jobs
# Don't delete temporary files for failed jobs
KEEP_FAILED_JOBS=false

# Dry Run Mode
# Simulate enhancement without actual processing
DRY_RUN=false

# ============================================
# Integration Settings
# ============================================

# TTS Integration Enabled
# Automatically enhance TTS-generated audio
TTS_ENHANCEMENT_ENABLED=true

# Auto-Enhancement Strategy
# Options: always, conditional, cache_only, disabled
# - always: Always enhance (ignore cache except duplicates)
# - conditional: Only enhance if quality below threshold
# - cache_only: Only use cache, never enhance
# - disabled: No enhancement
AUTO_ENHANCEMENT_STRATEGY=conditional

# Quality Threshold
# Minimum quality score (0-100) to skip enhancement
# Only used with conditional strategy
QUALITY_THRESHOLD=70

# ============================================
# Quota Management
# ============================================

# Quota Alert Threshold (%)
# Send alert when quota drops below this percentage
QUOTA_ALERT_THRESHOLD=20

# Auto-Pause on Quota Exhaustion
# Stop accepting requests when quota exhausted
AUTO_PAUSE_ON_QUOTA_EXHAUSTION=true

# Quota Reset Hour (UTC)
# Hour when Adobe quota resets (0-23)
# Adobe resets at midnight UTC
QUOTA_RESET_HOUR=0

# ============================================
# Webhook/Notification Settings
# ============================================

# Webhook URL
# POST completion notifications here
WEBHOOK_URL=

# Webhook Authentication
WEBHOOK_AUTH_TOKEN=

# Email Notifications
# Send alerts on failures/quota exhaustion
EMAIL_NOTIFICATIONS_ENABLED=false
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_FROM=noreply@example.com
EMAIL_TO=admin@example.com
EMAIL_USERNAME=
EMAIL_PASSWORD=

# Slack Notifications
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#audio-enhancement

# ============================================
# Advanced Configuration
# ============================================

# Custom User Agent
# Override default Playwright user agent
CUSTOM_USER_AGENT=

# Proxy Configuration
# Format: http://user:pass@host:port
HTTP_PROXY=
HTTPS_PROXY=

# DNS Servers
DNS_SERVERS=8.8.8.8,8.8.4.4

# Network Retry
NETWORK_RETRY_ATTEMPTS=3
NETWORK_RETRY_DELAY=2

# ============================================
# Cloud Storage (Optional)
# ============================================

# AWS S3 for Enhanced Audio Storage
AWS_S3_BUCKET=
AWS_S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# Google Cloud Storage
GCS_BUCKET=
GCS_PROJECT_ID=
GCS_CREDENTIALS_FILE=

# Azure Blob Storage
AZURE_STORAGE_ACCOUNT=
AZURE_STORAGE_KEY=
AZURE_CONTAINER=

# ============================================
# Database (Optional - for quota tracking)
# ============================================

# PostgreSQL for persistent quota tracking
DATABASE_URL=postgresql://user:password@localhost:5432/enhancement_db

# Redis for distributed caching
REDIS_URL=redis://localhost:6379/0

# ============================================
# Feature Flags
# ============================================

# Enable experimental features
EXPERIMENTAL_FEATURES=false

# Use alternative enhancement endpoint (if available)
USE_ALTERNATIVE_ENDPOINT=false

# Enable batch processing optimization
BATCH_OPTIMIZATION=true

# Enable audio pre-processing
AUDIO_PREPROCESSING=false

# ============================================
# Compliance & Legal
# ============================================

# Data Retention Days
# How long to keep enhancement jobs/logs
DATA_RETENTION_DAYS=90

# Privacy Mode
# Don't log audio content or filenames
PRIVACY_MODE=false

# Audit Logging
# Log all enhancement requests for compliance
AUDIT_LOGGING=false
AUDIT_LOG_FILE=logs/audit.log

# ============================================
# Notes
# ============================================

# 1. Adobe Podcast Limitations:
#    - No official public API (this uses browser automation)
#    - Free: 1h/day, Premium: 4h/day
#    - Service may change without notice
#
# 2. Production Recommendations:
#    - Use secrets manager (AWS/Azure/GCP)
#    - Enable monitoring (Sentry)
#    - Set up health checks
#    - Configure alerting
#    - Regular credential rotation
#
# 3. Performance:
#    - Enable caching (huge performance boost)
#    - Use multiple accounts for quota pooling
#    - Disable quality analysis in production
#    - Set appropriate concurrency limits
#
# 4. Security:
#    - Never commit this file to version control
#    - Use strong passwords
#    - Enable 2FA on Adobe accounts
#    - Encrypt credentials at rest
#    - Use HTTPS for all connections
#
# 5. Support:
#    - For Adobe issues: https://helpx.adobe.com/podcast.html
#    - For integration issues: Check ADOBE_ENHANCE_README.md
#    - For deployment: See DEPLOYMENT_GUIDE.md

# ============================================
# End of Configuration
# ============================================
